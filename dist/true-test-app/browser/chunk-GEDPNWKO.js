import{A as R}from"./chunk-K5ALLFS5.js";import{a as u,h as E,l as g,n as h}from"./chunk-WX4VKCG6.js";import{$ as x,Ca as _,Fb as $,Ga as l,W as f,Wa as C,_a as c,aa as p,db as n,ea as S,eb as i,fb as O,hc as y,ib as k,ic as I,lb as d,lc as H,ma as v,na as P,nb as m,r as w,xb as a,yb as U,zb as M}from"./chunk-RSBD42EU.js";var b=class r{baseURL=`${g.baseURL}/user/profile`;http=p(u);getUserProfile(t){return this.http.get(`${this.baseURL}/${t}`)}updateUserProfile(t,e){return this.http.put(`${this.baseURL}/${t}`,e)}getMentorOrStudentId(t){return this.http.get(`${this.baseURL}/${t}`).pipe(w(e=>e.idMentor||e.idEstudiante))}updateProfilePhoto(t,e){let o={fotoPerfil:e};return this.http.put(`${this.baseURL}/${t}/foto`,o)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};function z(r,t){if(r&1){let e=k();n(0,"img",18),d("click",function(){let s=v(e).$implicit,j=m(2);return P(j.selectPhoto(s))}),i()}if(r&2){let e=t.$implicit;c("src",e,_)}}function B(r,t){if(r&1){let e=k();n(0,"div",13)(1,"div",14)(2,"h3"),a(3,"Selecciona una foto"),i(),n(4,"div",15),C(5,z,1,1,"img",16),i(),n(6,"button",17),d("click",function(){v(e);let s=m();return P(s.closePhotoSelection())}),a(7,"Cerrar"),i()()()}if(r&2){let e=m();l(5),c("ngForOf",e.availablePhotos)}}var V=class r{profile;photoModalOpen=!1;availablePhotos=["perfiles/profile1.png","perfiles/profile2.png","perfiles/profile3.png","perfiles/profile4.png","perfiles/profile5.png","perfiles/profile6.png"];userProfileService=p(b);authService=p(h);router=p(E);snackBar=p(R);ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e?this.userProfileService.getUserProfile(e).subscribe({next:o=>{this.profile=o,this.showSnackBar("Perfil cargado con \xE9xito")},error:o=>{this.showSnackBar("Error al cargar el perfil")}}):(this.showSnackBar("Error al cargar el perfil"),this.router.navigate(["/auth/login"]))}openPhotoSelection(){this.photoModalOpen=!0}closePhotoSelection(){this.photoModalOpen=!1}selectPhoto(t){this.profile.fotoPerfil=t,this.closePhotoSelection(),this.saveProfile()}saveProfile(){let e=this.authService.getUser()?.id;e&&this.userProfileService.updateProfilePhoto(e,this.profile.fotoPerfil).subscribe({next:()=>{this.showSnackBar("Foto de perfil actualizada")},error:o=>{this.showSnackBar("Error al actualizar la foto de perfil")}})}navigateToUpdateProfile(){this.router.navigate(["/estudiante/perfil/actualizar"])}showSnackBar(t){this.snackBar.open(t,"Cerrar",{duration:3e3})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-ver-perfil"]],standalone:!0,features:[$],decls:22,vars:5,consts:[["id","ruta",0,"xmlns","id","http://www.w3.org/1999/xhtml",1,"container"],[1,"profile-container"],[1,"profile-card"],[1,"profile-header"],[1,"profile-photo-container"],["alt","Foto de perfil",1,"profile-photo",3,"src"],[3,"click"],[1,"fa-solid","fa-pencil"],[1,"profile-details"],[1,"profile-name"],[1,"user-id"],[1,"update-button",3,"click"],["class","photo-selection-modal",4,"ngIf"],[1,"photo-selection-modal"],[1,"photo-selection-container"],[1,"photo-options"],["alt","Foto de perfil","class","photo-option",3,"src","click",4,"ngFor","ngForOf"],["mat-button","",3,"click"],["alt","Foto de perfil",1,"photo-option",3,"click","src"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h1"),a(2,"Perfil de Usuario"),i(),n(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),O(7,"img",5),n(8,"button",6),d("click",function(){return o.openPhotoSelection()}),O(9,"i",7),i()(),n(10,"div",8)(11,"h2",9),a(12),i(),n(13,"p",10),a(14),i(),n(15,"p")(16,"strong"),a(17,"Email:"),i(),a(18),i(),n(19,"button",11),d("click",function(){return o.navigateToUpdateProfile()}),a(20," Editar informacion "),i()()(),C(21,B,8,1,"div",12),i()()()),e&2&&(l(7),c("src",o.profile.fotoPerfil?o.profile.fotoPerfil:"https://cdn-icons-png.flaticon.com/512/1154/1154987.png",_),l(5),U(o.profile.nombre),l(2),M("ID: ",o.profile.userId,""),l(4),M(" ",o.profile.email,""),l(3),c("ngIf",o.photoModalOpen))},dependencies:[H,y,I],styles:["@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.container[_ngcontent-%COMP%]{background-image:url(https://w7.pngwing.com/pngs/574/414/png-transparent-naver-blog-tistory-naver-blog-daum-green-chalkboard-miscellaneous-rectangle-green-apple.png);background-size:contain;background-repeat:no-repeat;background-position:center;padding:50px 80px}h1[_ngcontent-%COMP%]{text-align:center;background-color:#e4b670;color:#000;padding:10px 20px;font-weight:700;text-decoration:underline;text-underline-offset:4px;letter-spacing:.07em;font-family:Instrument Sans,sans-serif;font-style:italic;border:4px solid white;border-radius:0;display:inline-block;box-shadow:0 13.39px 9.03px #0000003f,0 17px 19px #00000040,0 11.58px 4.6px #00000039,0 8.09px 1.99px #0000002a}#ruta[_ngcontent-%COMP%]{text-align:center;padding:50px 15px}.profile-header[_ngcontent-%COMP%]{padding:0}.profile-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;padding:5% 5vw}.profile-container[_ngcontent-%COMP%]   .profile-photo[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%}.profile-card[_ngcontent-%COMP%]{padding-left:40px;text-align:left;display:flex;gap:30px;align-items:center}.profile-details[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#ffffffe6;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:20px;padding:30px;box-shadow:0 8px 30px #0003;text-align:left}.update-button[_ngcontent-%COMP%]{background-color:#1e88e5;color:#fff;font-weight:700;padding:12px 24px;border:none;border-radius:25px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.update-button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.profile-photo-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.profile-photo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background-color:#ffffffb3;border-radius:50%;padding:10px;cursor:pointer;font-size:18px;transition:background-color .3s ease,transform .3s ease;border:none}.profile-photo-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff;transform:scale(1.1)}.photo-selection-modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;background-color:#e4b670;color:#000;padding:10px 20px;font-weight:700;text-decoration:underline;text-underline-offset:4px;letter-spacing:.07em;font-family:Instrument Sans,sans-serif;font-style:italic;border:4px solid white;border-radius:0;display:inline-block;box-shadow:0 13.39px 9.03px #0000003f,0 17px 19px #00000040,0 11.58px 4.6px #00000039,0 8.09px 1.99px #0000002a}.profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:32px;font-weight:700;margin:10px 0;letter-spacing:.2em;background-color:#fff;padding:5px;border-radius:13px;border:6px solid #E6B771;text-align:center}.photo-selection-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center}.photo-selection-container[_ngcontent-%COMP%]{margin-bottom:10px;background:#fff;padding:0;border-radius:10px;text-align:center;max-width:500px}.profile-photo-container[_ngcontent-%COMP%]{margin-bottom:50px;position:relative}.profile-photo[_ngcontent-%COMP%]{width:350px;height:350px;border-radius:50%;object-fit:cover;border:8px solid #e4b670;box-shadow:0 4px 10px #0003}.photo-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);margin:0 80px;gap:10px}.photo-option[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;cursor:pointer;border:3px solid #e4b670;transition:border-color .3s}.photo-option[_ngcontent-%COMP%]:hover{border-color:#1e88e5}.profile-card[_ngcontent-%COMP%]{text-align:center}.profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:2rem;font-weight:700;margin:10px 0}.profile-card[_ngcontent-%COMP%]   .user-id[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:10px}.profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000000b3;font-size:1.1rem;margin:10px 0}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]{width:90%;padding:20px}.profile-photo[_ngcontent-%COMP%]{width:100px;height:100px}}"]})};var F=class r{constructor(t,e){this.http=t;this.authService=e}baseURL=`${g.baseURL}/api/horarios`;getHorarios(t){return this.http.get(`${this.baseURL}/mentor/${t}`)}createHorario(t,e){return this.http.post(`${this.baseURL}/${e}`,t)}updateHorario(t,e,o){return this.http.put(`${this.baseURL}/${t}/mentor/${o}`,e)}deleteHorario(t,e){return this.http.delete(`${this.baseURL}/${t}/mentor/${e}`)}registerStudentToHorario(t,e){return this.http.post(`${this.baseURL}/${t}/estudiante/${e}`,{})}unregisterStudentFromHorarioByStudent(t,e){return this.http.delete(`${this.baseURL}/${t}/estudiante/${e}`)}unregisterStudentFromHorarioByMentor(t,e,o){return this.http.delete(`${this.baseURL}/${t}/mentor/${o}/estudiante/${e}`)}static \u0275fac=function(e){return new(e||r)(x(u),x(h))};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};export{b as a,V as b,F as c};
