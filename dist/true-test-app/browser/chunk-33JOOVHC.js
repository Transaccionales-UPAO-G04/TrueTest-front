import{a as k,b as I,c as T,d as N,e as B,f as D}from"./chunk-MVH55HI2.js";import{a as ae}from"./chunk-QMQQ3DEL.js";import{A as L,B as me,a as _,b as c,d as x,e as w,h as M,i as P,j as S,k as se,l as E,m as R,n as F,y as q,z as A}from"./chunk-K5ALLFS5.js";import{a as ie}from"./chunk-2GNN26SI.js";import{a as ee,f as te,g as oe,h as C,i as ne,l as re,n as y}from"./chunk-WX4VKCG6.js";import"./chunk-XAZLOLJU.js";import{$ as W,Fb as f,Ga as a,Ha as O,W as Q,Wa as d,_a as m,aa as p,cb as u,db as r,ea as g,eb as n,fb as l,ib as J,ic as X,lb as b,lc as Z,ma as $,na as Y,nb as h,xb as i}from"./chunk-RSBD42EU.js";var G=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-auth-layout"]],standalone:!0,features:[f],decls:4,vars:0,template:function(e,s){e&1&&(l(0,"app-navbar"),r(1,"div"),l(2,"router-outlet"),n(),l(3,"app-footer"))},dependencies:[ae,ie,oe],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;justify-content:center;align-items:center;padding:20px}.content-wrapper[_ngcontent-%COMP%]{padding:20px}"]})};function ue(t,o){t&1&&(r(0,"mat-error"),i(1,"Este campo es obligatorio"),n())}function ge(t,o){t&1&&(r(0,"mat-error"),i(1,"Introduzca un correo electr\xF3nico v\xE1lido."),n())}function fe(t,o){t&1&&(r(0,"mat-error"),i(1,"Este campo es obligatorio"),n())}var j=class t{loginForm;fb=p(E);router=p(C);snackBar=p(L);authService=p(y);constructor(){this.loginForm=this.fb.group({email:["correo prueba",[c.required,c.email]],password:["contrase\xF1a prueba",[c.required]]})}controlHasError(o,e){return this.loginForm.controls[o].hasError(e)}onSubmit(){if(this.loginForm.invalid)return;let o=this.loginForm.value;this.authService.login(o).subscribe({next:()=>{this.showSnackBar("Inicio de sesi\xF3n exitoso");let e=this.authService.getUserRole();e==="ESTUDIANTE"?this.router.navigate(["/estudiante"]):e==="MENTOR"?this.router.navigate(["/mentor"]):this.showSnackBar("Rol no reconocido. Contacte al administrador.")},error:()=>{this.showSnackBar("Error en el inicio de sesi\xF3n. Por favor, intenta de nuevo.")}})}showSnackBar(o){this.snackBar.open("Login Successful","Close",{duration:2e3,verticalPosition:"top"})}goToEstudianteLayout(){this.router.navigate(["/estudiante"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-login"]],standalone:!0,features:[f],decls:33,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"login-image"],[1,"image-overlay-text"],[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["routerLink","/auth/password-reset"],["routerLink","/auth/register"]],template:function(e,s){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),i(5,"Bienvenido a TrueTest"),n(),r(6,"p"),i(7,"Inicia sesi\xF3n para continuar"),n()()(),r(8,"div",4)(9,"h2"),i(10,"Iniciar Sesi\xF3n"),n(),r(11,"form",5),b("ngSubmit",function(){return s.onSubmit()}),r(12,"mat-form-field",6)(13,"mat-label"),i(14,"Correo Electr\xF3nico"),n(),l(15,"input",7),d(16,ue,2,0,"mat-error")(17,ge,2,0,"mat-error"),n(),r(18,"mat-form-field",6)(19,"mat-label"),i(20,"Contrase\xF1a"),n(),l(21,"input",8),d(22,fe,2,0,"mat-error"),n(),r(23,"button",9),i(24," Iniciar Sesi\xF3n "),n()(),r(25,"p"),i(26,"\xBFOlvidaste tu contrase\xF1a? "),r(27,"a",10),i(28,"Recupera tu contrase\xF1a aqu\xED"),n()(),r(29,"p"),i(30,"\xBFNo tienes cuenta? "),r(31,"a",11),i(32,"Reg\xEDstrate aqu\xED"),n()()()()()),e&2&&(a(11),m("formGroup",s.loginForm),a(5),u(s.controlHasError("email","required")?16:-1),a(),u(s.controlHasError("email","email")?17:-1),a(5),u(s.controlHasError("password","required")?22:-1),a(),m("disabled",s.loginForm.invalid))},dependencies:[R,M,_,x,w,F,P,S,B,N,T,k,I,D,me,A,q,ne],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif;background:linear-gradient(120deg,#1e88e5,#42a5f5,#90caf9);background-size:200% 200%;animation:_ngcontent-%COMP%_gradientAnimation 8s ease infinite}@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh}.login-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:85%;max-width:900px;background:#fffc;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:20px;overflow:hidden;box-shadow:0 8px 30px #0003}.login-image[_ngcontent-%COMP%]{width:45%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d47a1,#1976d2);color:#fff;text-align:center;padding:20px}.image-overlay-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.image-overlay-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.9}.login-form[_ngcontent-%COMP%]{width:55%;padding:50px 40px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e88e5;text-align:center;font-size:2rem;font-weight:700;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.mat-form-field-label[_ngcontent-%COMP%]{color:#1e88e5!important;font-weight:500}input[_ngcontent-%COMP%]{color:#333}.submit-button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:1.1rem;font-weight:700;color:#fff!important;background-color:#1e88e5!important;border:none;border-radius:10px;box-shadow:0 4px 15px #1e88e54d;transition:background-color .3s ease,transform .2s ease}.submit-button[_ngcontent-%COMP%]:hover{background-color:#1565c0!important;transform:scale(1.02)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#b0bec5!important}p[_ngcontent-%COMP%]{color:#424242;text-align:center}a[_ngcontent-%COMP%]{color:#1e88e5;text-decoration:none;font-weight:600}a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 992px){.login-card[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.login-image[_ngcontent-%COMP%]{width:100%;height:180px}.login-form[_ngcontent-%COMP%]{width:100%;padding:30px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1e88e5;text-decoration:none}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}}"]})};function be(t,o){t&1&&(r(0,"mat-error"),i(1,"Este campo es obligatorio"),n())}function ve(t,o){t&1&&(r(0,"mat-error"),i(1,"Este campo es obligatorio"),n())}function he(t,o){t&1&&(r(0,"mat-error"),i(1,"Introduzca un correo electr\xF3nico v\xE1lido"),n())}function Ce(t,o){t&1&&(r(0,"mat-error"),i(1,"Este campo es obligatorio"),n())}var H=class t{registerForm;fb=p(E);router=p(C);snackBar=p(L);authService=p(y);constructor(){this.registerForm=this.fb.group({nombre:["",c.required],email:["",[c.required,c.email]],password:["",c.required]})}controlHasError(o,e){return this.registerForm.controls[o].hasError(e)}onSubmit(){if(this.registerForm.valid){let o=this.registerForm.value;this.authService.register(o).subscribe({next:()=>{this.showSnackBar("Usuario creado correctamente"),this.router.navigate(["/auth/login"])},error:e=>{this.showSnackBar(e.error.message)}})}}showSnackBar(o){this.snackBar.open(o,"Cerrar",{duration:3e3})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-register"]],standalone:!0,features:[f],decls:34,vars:6,consts:[[1,"register-container"],[1,"register-card"],[1,"register-image"],[1,"register-overlay"],[1,"register-text"],[1,"register-description"],[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","nombre","placeholder","Ingrese su nombre"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","password","type","password","placeholder","Ingrese su contrase\xF1a"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["routerLink","/auth/login"]],template:function(e,s){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),i(5,"Bienvenido a TrueTest"),n(),r(6,"p",5),i(7," Texo de bienvenida y tal."),n()()(),r(8,"div",6)(9,"h2"),i(10,"Crear Cuenta - Estudiante"),n(),r(11,"form",7),b("ngSubmit",function(){return s.onSubmit()}),r(12,"mat-form-field",8)(13,"mat-label"),i(14,"Nombre"),n(),l(15,"input",9),d(16,be,2,0,"mat-error"),n(),r(17,"mat-form-field",8)(18,"mat-label"),i(19,"Correo Electr\xF3nico"),n(),l(20,"input",10),d(21,ve,2,0,"mat-error")(22,he,2,0,"mat-error"),n(),r(23,"mat-form-field",8)(24,"mat-label"),i(25,"Contrase\xF1a"),n(),l(26,"input",11),d(27,Ce,2,0,"mat-error"),n(),r(28,"button",12),i(29," Registrarse "),n()(),r(30,"p"),i(31,"\xBFYa tienes cuenta? "),r(32,"a",13),i(33,"Inicia sesi\xF3n aqu\xED"),n()()()()()),e&2&&(a(11),m("formGroup",s.registerForm),a(5),u(s.controlHasError("nombre","required")?16:-1),a(5),u(s.controlHasError("email","required")?21:-1),a(),u(s.controlHasError("email","email")?22:-1),a(5),u(s.controlHasError("password","required")?27:-1),a(),m("disabled",s.registerForm.invalid))},dependencies:[B,N,T,k,I,D,A,q,F,M,_,x,w,P,S],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif;background:linear-gradient(120deg,#1e88e5,#42a5f5,#90caf9);background-size:200% 200%;animation:_ngcontent-%COMP%_gradientAnimation 8s ease infinite}@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh}.register-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:85%;max-width:900px;background:#fffc;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:20px;overflow:hidden;box-shadow:0 8px 30px #0003}.register-image[_ngcontent-%COMP%]{width:45%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d47a1,#1976d2);color:#fff;text-align:center;padding:20px}.register-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.register-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.9}.register-form[_ngcontent-%COMP%]{width:55%;padding:50px 40px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e88e5;text-align:center;font-size:2rem;font-weight:700;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.mat-form-field-label[_ngcontent-%COMP%]{color:#1e88e5!important;font-weight:500}input[_ngcontent-%COMP%]{color:#333}.submit-button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:1.1rem;font-weight:700;color:#fff!important;background-color:#1e88e5!important;border:none;border-radius:10px;box-shadow:0 4px 15px #1e88e54d;transition:background-color .3s ease,transform .2s ease}.submit-button[_ngcontent-%COMP%]:hover{background-color:#1565c0!important;transform:scale(1.02)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#b0bec5!important}p[_ngcontent-%COMP%]{color:#424242;text-align:center}a[_ngcontent-%COMP%]{color:#1e88e5;text-decoration:none;font-weight:600}a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 992px){.register-card[_ngcontent-%COMP%]{flex-direction:column;max-width:600px}.register-image[_ngcontent-%COMP%]{width:100%;height:180px}.register-form[_ngcontent-%COMP%]{width:100%;padding:30px}}"]})};var z=class t{constructor(o){this.http=o}baseUrl=`${re.baseURL}/mail`;sendPasswordResetEmail(o){return this.http.post(`${this.baseUrl}/sendMail`,o,{responseType:"text"})}checkTokenValidity(o){return this.http.get(`${this.baseUrl}/reset/check/${o}`)}resetPassword(o,e){return this.http.post(`${this.baseUrl}/reset/${o}`,e,{responseType:"text"})}static \u0275fac=function(e){return new(e||t)(W(ee))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})};function xe(t,o){t&1&&(r(0,"small",9),i(1," El correo electr\xF3nico es obligatorio. "),n())}function we(t,o){t&1&&(r(0,"small",9),i(1," Ingresa un correo electr\xF3nico v\xE1lido. "),n())}function Me(t,o){if(t&1&&(r(0,"div"),d(1,xe,2,0,"small",8)(2,we,2,0,"small",8),n()),t&2){let e=h(2);a(),m("ngIf",e.passwordForm.controls.email.hasError("required")),a(),m("ngIf",e.passwordForm.controls.email.hasError("email"))}}function Pe(t,o){t&1&&(r(0,"div",10),i(1," Hemos enviado un correo con las instrucciones para restablecer tu contrase\xF1a. "),n())}function Se(t,o){t&1&&(r(0,"div",9),i(1," Hubo un error al enviar el correo. Intenta de nuevo. "),n())}function Ee(t,o){if(t&1){let e=J();r(0,"div")(1,"div",1)(2,"h2"),i(3,"Recuperar Contrase\xF1a"),n(),r(4,"form",2),b("ngSubmit",function(){$(e);let v=h();return Y(v.requestPasswordReset())}),r(5,"div",3)(6,"label",4),i(7,"Correo Electr\xF3nico"),n(),l(8,"input",5),d(9,Me,3,2,"div",0),n(),r(10,"button",6),i(11,"Enviar Correo"),n()(),d(12,Pe,2,0,"div",7)(13,Se,2,0,"div",8),n()()}if(t&2){let e=h();a(4),m("formGroup",e.passwordForm),a(5),m("ngIf",e.passwordForm.controls.email.invalid&&e.passwordForm.controls.email.touched),a(3),m("ngIf",e.isEmailSent),a(),m("ngIf",e.isEmailError)}}function Fe(t,o){t&1&&(r(0,"div",10),i(1," Contrase\xF1a restablecida con \xE9xito. Ahora puedes iniciar sesi\xF3n. "),n())}function Oe(t,o){t&1&&(r(0,"div",9),i(1," Hubo un error al restablecer tu contrase\xF1a. Intenta de nuevo. "),n())}function ye(t,o){if(t&1){let e=J();r(0,"div")(1,"div",1)(2,"h2"),i(3,"Restablecer Contrase\xF1a"),n(),r(4,"form",2),b("ngSubmit",function(){$(e);let v=h();return Y(v.resetPassword())}),r(5,"div",3)(6,"label",11),i(7,"Nueva Contrase\xF1a"),n(),l(8,"input",12),n(),r(9,"button",13),i(10,"Restablecer Contrase\xF1a"),n()(),d(11,Fe,2,0,"div",7)(12,Oe,2,0,"div",8),n()()}if(t&2){let e=h();a(4),m("formGroup",e.passwordForm),a(5),m("disabled",e.passwordForm.invalid),a(2),m("ngIf",e.isPasswordResetSuccess),a(),m("ngIf",e.isPasswordResetError)}}var U=class t{constructor(o,e,s,v){this.fb=o;this.passwordResetService=e;this.activatedRoute=s;this.router=v;this.passwordForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}passwordForm;token="";isTokenValid=!0;isEmailSent=!1;isEmailError=!1;isPasswordResetSuccess=!1;isPasswordResetError=!1;ngOnInit(){this.activatedRoute.paramMap.subscribe(o=>{let e=o.get("token");e&&(this.token=e)})}verifyToken(o){}requestPasswordReset(){let o=this.passwordForm.get("email")?.value;this.passwordResetService.sendPasswordResetEmail(o).subscribe(e=>{this.isEmailSent=!0,this.isEmailError=!1},e=>{this.isEmailSent=!1,this.isEmailError=!0})}resetPassword(){let o=this.passwordForm.get("password")?.value;this.passwordResetService.resetPassword(this.token,o).subscribe(e=>{this.isPasswordResetSuccess=!0,this.isPasswordResetError=!1},e=>{this.isPasswordResetSuccess=!1,this.isPasswordResetError=!0})}static \u0275fac=function(e){return new(e||t)(O(E),O(z),O(te),O(C))};static \u0275cmp=g({type:t,selectors:[["app-password-reset"]],standalone:!0,features:[f],decls:2,vars:2,consts:[[4,"ngIf"],[1,"reset-password-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","required",""],["type","submit",1,"btn"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"success-message"],["for","password"],["id","password","type","password","formControlName","password","required",""],["type","submit",1,"btn",3,"disabled"]],template:function(e,s){e&1&&d(0,Ee,14,4,"div",0)(1,ye,13,4,"div",0),e&2&&(m("ngIf",!s.token),a(),m("ngIf",s.token&&s.isTokenValid))},dependencies:[Z,X,F,M,_,x,w,se,P,S,R],styles:[".reset-password-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9}.reset-password-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.reset-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.reset-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.reset-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.reset-password-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#1e88e5;color:#fff;border:none;border-radius:4px;cursor:pointer}.reset-password-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#1565c0}.success-message[_ngcontent-%COMP%]{color:green;text-align:center;margin-top:20px}.error-message[_ngcontent-%COMP%]{color:red;text-align:center;margin-top:20px}"]})};var ht=[{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"",component:G,children:[{path:"login",component:j},{path:"register",component:H},{path:"password-reset",component:U}]}];export{ht as authRoutes};
