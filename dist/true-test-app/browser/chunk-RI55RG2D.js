import{a as oe,b as re,c as ie}from"./chunk-GEDPNWKO.js";import{A as ne,a as J,d as K,e as Q,f as X,g as Y,h as $,k as ee,m as te}from"./chunk-K5ALLFS5.js";import{a as Z}from"./chunk-2GNN26SI.js";import{g as q,h as P,i as G,k as E,n as k}from"./chunk-WX4VKCG6.js";import"./chunk-XAZLOLJU.js";import{Bb as C,Ca as z,Cb as x,Db as v,Fb as _,Ga as c,Ha as f,Kb as U,Wa as M,_a as u,a as T,aa as y,db as n,ea as g,eb as o,fb as h,gb as W,hb as L,hc as j,ib as S,ic as O,lb as b,lc as H,ma as m,na as p,nb as d,ta as R,wb as A,xb as a,yb as w}from"./chunk-RSBD42EU.js";function se(s,i){if(s&1){let e=S();W(0),n(1,"li",10)(2,"a",11),a(3,"Horarios"),o()(),n(4,"li",10)(5,"a",12),a(6,"Rese\xF1as"),o()(),n(7,"li",13)(8,"a",14),h(9,"i",15),a(10," Mi Perfil "),o(),n(11,"ul",16)(12,"li")(13,"a",17),a(14,"Ver Perfil"),o()(),n(15,"li")(16,"a",18),b("click",function(){m(e);let r=d();return p(r.logout())}),a(17,"Cerrar Sesi\xF3n"),o()()()(),L()}}function ce(s,i){s&1&&(n(0,"li",19)(1,"a",20),h(2,"i",21),a(3," Reg\xEDstrate "),o()(),n(4,"li",22)(5,"a",23),h(6,"i",24),a(7," Iniciar Sesi\xF3n "),o()())}var I=class s{authService=y(k);zone=y(R);router=y(P);isAuthenticated=!1;ngOnInit(){this.authService.isAuthenticated$.subscribe(i=>{this.zone.run(()=>{this.isAuthenticated=i})})}logout(){this.authService.logout(),this.router.navigate(["/auth/login"]).then(()=>{window.location.reload()})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=g({type:s,selectors:[["app-navbar-mentor"]],standalone:!0,features:[_],decls:11,vars:2,consts:[["loggedOut",""],[1,"navbar","navbar-expand-lg","navbar"],[1,"container"],["href","#",1,"navbar-brand"],["src","logo.jpg","alt","TrueTest Logo",1,"logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[4,"ngIf","ngIfElse"],[1,"nav-item"],["routerLink","/mentor/horarios",1,"nav-link"],["routerLink","/mentor/rese\xF1as",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","profileDropdown","role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"fas","fa-user"],[1,"dropdown-menu"],["routerLink","/estudiante/perfil",1,"dropdown-item"],["href","#",1,"dropdown-item",3,"click"],[1,"nav-item","ms-3"],["routerLink","/auth/register",1,"btn","btn-outline-primary"],[1,"fas","fa-user-plus"],[1,"nav-item","ms-2"],["routerLink","/auth/login",1,"btn","btn-primary"],[1,"fas","fa-sign-in-alt"]],template:function(e,t){if(e&1&&(n(0,"nav",1)(1,"div",2)(2,"a",3),h(3,"img",4),o()(),n(4,"button",5),h(5,"span",6),o(),n(6,"div",7)(7,"ul",8),M(8,se,18,0,"ng-container",9)(9,ce,8,0,"ng-template",null,0,U),o()()()),e&2){let r=A(10);c(8),u("ngIf",t.isAuthenticated)("ngIfElse",r)}},dependencies:[H,O,G,E],styles:['.navbar[_ngcontent-%COMP%]{width:100%;background:linear-gradient(to right,#4facfe,#00f2fe);color:#fff;padding:10px 20px;display:flex;box-shadow:0 2px 4px #0000001a}.footer-container[_ngcontent-%COMP%]{color:#b0bec5;display:flex;width:100vw;gap:40px;box-sizing:border-box}.logo[_ngcontent-%COMP%]{max-width:100px;margin-bottom:10px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:5px;margin-right:10px}.navbar-brand[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;padding-left:0}.navbar-menu[_ngcontent-%COMP%]{list-style:none;display:flex;gap:30px;margin:0;padding:0}.navbar-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:16px;display:flex;align-items:center;gap:10px;transition:color .3s}.navbar-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ffdf5d}.icon[_ngcontent-%COMP%]{font-size:20px}.icon-prueba[_ngcontent-%COMP%]:before{content:"\\1f4d6"}.icon-mentores[_ngcontent-%COMP%]:before{content:"\\1f464"}.icon-planes[_ngcontent-%COMP%]:before{content:"\\1f4c8"}.icon-login[_ngcontent-%COMP%]:before{content:"\\1f511"}']})};var N=class s{constructor(i){this.router=i}navigateTo(i){this.router.navigate([`/mentor/${i}`])}static \u0275fac=function(e){return new(e||s)(f(P))};static \u0275cmp=g({type:s,selectors:[["app-mentor-layout"]],standalone:!0,features:[_],decls:3,vars:0,template:function(e,t){e&1&&h(0,"app-navbar-mentor")(1,"router-outlet")(2,"app-footer")},dependencies:[I,E,q,Z],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif;background-color:#fff}.layout-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;color:#333}.layout-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#1e88e5;font-weight:700}.layout-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:30px;color:#555}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%;max-width:600px;margin:0 auto}.nav-button[_ngcontent-%COMP%]{position:relative;background-color:#1e88e5;color:#fff;border:none;border-radius:15px;padding:40px;font-size:1.4rem;font-weight:700;width:100%;text-align:left;cursor:pointer;overflow:hidden;transition:background-color .3s ease,transform .3s ease;box-shadow:0 4px 15px #1e88e54d}.nav-button[_ngcontent-%COMP%]   .button-image[_ngcontent-%COMP%]{position:absolute;inset:0;object-fit:cover;width:100%;height:100%;opacity:.3;z-index:-1}.nav-button[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:scale(1.05)}.nav-button[_ngcontent-%COMP%]:disabled{background-color:#b0bec5}@media (max-width: 992px){.button-container[_ngcontent-%COMP%]{width:100%}.nav-button[_ngcontent-%COMP%]{font-size:1.2rem;padding:35px}}"]})};var D=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=g({type:s,selectors:[["app-resenas"]],standalone:!0,features:[_],decls:2,vars:0,template:function(e,t){e&1&&(n(0,"p"),a(1,"resenas works!"),o())}})};function me(s,i){if(s&1){let e=S();n(0,"button",15),b("click",function(){m(e);let r=d().$implicit,l=d();return p(l.deleteHorario(r.idHorario))}),a(1,"Eliminar"),o()}}function pe(s,i){if(s&1){let e=S();n(0,"tr")(1,"td"),a(2),o(),n(3,"td"),a(4),o(),n(5,"td")(6,"a",14),a(7,"Enlace"),o()(),n(8,"td"),a(9),o(),n(10,"td")(11,"button",15),b("click",function(){let r=m(e).$implicit,l=d();return p(l.startEditing(r))}),a(12,"Editar"),o(),M(13,me,2,0,"button",16),o()()}if(s&2){let e=i.$implicit,t=d();c(2),w(e.fecha),c(2),w(e.horaSesion),c(2),u("href",e.linkSesionPublica,z),c(3),w(t.estudiantesAsignados[t.horarios.indexOf(e)]),c(4),u("ngIf",e.idHorario!==void 0)}}function ue(s,i){if(s&1){let e=S();n(0,"div",4)(1,"h3"),a(2,"Editar Horario"),o(),n(3,"form",5),b("ngSubmit",function(){m(e);let r=d();return p(r.editHorario(r.editableHorario))}),n(4,"label",6),a(5,"Fecha:"),o(),n(6,"input",17),v("ngModelChange",function(r){m(e);let l=d();return x(l.editableHorario.fecha,r)||(l.editableHorario.fecha=r),p(r)}),o(),n(7,"label",8),a(8,"Hora de la sesi\xF3n:"),o(),n(9,"input",18),v("ngModelChange",function(r){m(e);let l=d();return x(l.editableHorario.horaSesion,r)||(l.editableHorario.horaSesion=r),p(r)}),o(),n(10,"label",10),a(11,"Enlace de la sesi\xF3n:"),o(),n(12,"input",19),v("ngModelChange",function(r){m(e);let l=d();return x(l.editableHorario.linkSesionPublica,r)||(l.editableHorario.linkSesionPublica=r),p(r)}),o(),n(13,"button",12),a(14,"Actualizar"),o(),n(15,"button",20),b("click",function(){m(e);let r=d();return p(r.cancelEditing())}),a(16,"Cancelar"),o()()()}if(s&2){let e=d();c(6),C("ngModel",e.editableHorario.fecha),u("min",e.today),c(3),C("ngModel",e.editableHorario.horaSesion),c(3),C("ngModel",e.editableHorario.linkSesionPublica)}}var F=class s{constructor(i,e,t,r,l){this.horarioService=i;this.authService=e;this.router=t;this.snackBar=r;this.perfilUsuarioService=l}horarios=[];newHorario={fecha:"",horaSesion:"",linkSesionPublica:""};editableHorario=null;estudiantesAsignados=[];today="";ngOnInit(){let i=new Date;this.today=i.toISOString().split("T")[0];let e=this.authService.getUser();e&&this.perfilUsuarioService.getMentorOrStudentId(e.id).subscribe({next:t=>{t?this.horarioService.getHorarios(t).subscribe({next:r=>{this.horarios=r,this.estudiantesAsignados=r.map(l=>l.nombre?l.nombre:"Ning\xFAn estudiante registrado")},error:r=>{console.error("Error al cargar horarios:",r)}}):this.snackBar.open("No se encontr\xF3 un mentor asociado al usuario","Cerrar",{duration:3e3})},error:t=>{console.error("Error al obtener el ID del mentor:",t)}})}createHorario(){let i=this.authService.getUser();i&&this.perfilUsuarioService.getMentorOrStudentId(i.id).subscribe({next:e=>{if(e){let t=T({},this.newHorario);console.log("Datos enviados al backend:",t),this.horarioService.createHorario(t,e).subscribe({next:r=>{this.horarios.push(r),this.estudiantesAsignados.push("Ning\xFAn estudiante registrado"),this.newHorario={fecha:"",horaSesion:"",linkSesionPublica:""},this.snackBar.open("Horario creado con \xE9xito","Cerrar",{duration:3e3})},error:r=>{console.error("Error al crear horario:",r),this.snackBar.open("Error al crear horario","Cerrar",{duration:3e3})}})}else this.snackBar.open("No se encontr\xF3 un mentor asociado al usuario","Cerrar",{duration:3e3})},error:e=>{console.error("Error al obtener el ID del mentor:",e),this.snackBar.open("Error al obtener el ID del mentor","Cerrar",{duration:3e3})}})}editHorario(i){if(i&&i.idHorario!=null){let e=this.authService.getUser();e&&this.perfilUsuarioService.getMentorOrStudentId(e.id).subscribe({next:t=>{t?this.horarioService.updateHorario(i.idHorario,i,t).subscribe(r=>{let l=this.horarios.findIndex(ae=>ae.idHorario===i.idHorario);l!==-1&&(this.horarios[l]=r),this.snackBar.open("Horario actualizado con \xE9xito","Cerrar",{duration:3e3}),this.cancelEditing()},r=>{console.error("Error al actualizar horario:",r),this.snackBar.open("Error al actualizar horario","Cerrar",{duration:3e3})}):(console.error("No se encontr\xF3 un mentor asociado al usuario"),this.snackBar.open("No se encontr\xF3 un mentor asociado al usuario","Cerrar",{duration:3e3}))},error:t=>{console.error("Error al obtener el ID del mentor:",t),this.snackBar.open("Error al obtener el ID del mentor","Cerrar",{duration:3e3})}})}else console.error("ID del horario no v\xE1lido para edici\xF3n"),this.snackBar.open("ID del horario no v\xE1lido para edici\xF3n","Cerrar",{duration:3e3})}deleteHorario(i){if(i){let e=this.authService.getUser();e&&this.perfilUsuarioService.getMentorOrStudentId(e.id).subscribe({next:t=>{t?this.horarioService.deleteHorario(i,t).subscribe(()=>{this.horarios=this.horarios.filter(r=>r.idHorario!==i),this.snackBar.open("Horario eliminado con \xE9xito","Cerrar",{duration:3e3})},r=>{console.error("Error al eliminar horario:",r),this.snackBar.open("Error al eliminar horario","Cerrar",{duration:3e3})}):this.snackBar.open("No se encontr\xF3 un mentor asociado al usuario","Cerrar",{duration:3e3})},error:t=>{console.error("Error al obtener el ID del mentor:",t),this.snackBar.open("Error al obtener el ID del mentor","Cerrar",{duration:3e3})}})}}startEditing(i){i?this.editableHorario=T({},i):(console.error("Horario no v\xE1lido para edici\xF3n"),this.snackBar.open("Horario no v\xE1lido para edici\xF3n","Cerrar",{duration:3e3}))}cancelEditing(){this.editableHorario=null}static \u0275fac=function(e){return new(e||s)(f(ie),f(k),f(P),f(ne),f(oe))};static \u0275cmp=g({type:s,selectors:[["app-horarios"]],standalone:!0,features:[_],decls:37,vars:6,consts:[[1,"horario-container"],[1,"horarios-list"],[1,"horarios-table"],[4,"ngFor","ngForOf"],[1,"horario-form"],[3,"ngSubmit"],["for","fecha"],["type","date","id","fecha","name","fecha","required","",3,"ngModelChange","ngModel","min"],["for","horaSesion"],["type","time","id","horaSesion","name","horaSesion","required","",3,"ngModelChange","ngModel"],["for","linkSesionPublica"],["type","url","id","linkSesionPublica","name","linkSesionPublica","required","",3,"ngModelChange","ngModel"],["type","submit"],["class","horario-form",4,"ngIf"],["target","_blank",3,"href"],[3,"click"],[3,"click",4,"ngIf"],["type","date","name","fecha","required","",3,"ngModelChange","ngModel","min"],["type","time","name","horaSesion","required","",3,"ngModelChange","ngModel"],["type","url","name","linkSesionPublica","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2"),a(2,"Gesti\xF3n de Horarios"),o(),n(3,"div",1)(4,"h3"),a(5,"Horarios Disponibles"),o(),n(6,"table",2)(7,"thead")(8,"tr")(9,"th"),a(10,"Fecha"),o(),n(11,"th"),a(12,"Hora de la sesi\xF3n"),o(),n(13,"th"),a(14,"Enlace"),o(),n(15,"th"),a(16,"Estudiante"),o(),n(17,"th"),a(18,"Acciones"),o()()(),n(19,"tbody"),M(20,pe,14,5,"tr",3),o()()(),n(21,"div",4)(22,"h3"),a(23,"Crear Nuevo Horario"),o(),n(24,"form",5),b("ngSubmit",function(){return t.createHorario()}),n(25,"label",6),a(26,"Fecha:"),o(),n(27,"input",7),v("ngModelChange",function(l){return x(t.newHorario.fecha,l)||(t.newHorario.fecha=l),l}),o(),n(28,"label",8),a(29,"Hora de la sesi\xF3n:"),o(),n(30,"input",9),v("ngModelChange",function(l){return x(t.newHorario.horaSesion,l)||(t.newHorario.horaSesion=l),l}),o(),n(31,"label",10),a(32,"Enlace de la sesi\xF3n:"),o(),n(33,"input",11),v("ngModelChange",function(l){return x(t.newHorario.linkSesionPublica,l)||(t.newHorario.linkSesionPublica=l),l}),o(),n(34,"button",12),a(35,"Crear"),o()()(),M(36,ue,17,4,"div",13),o()),e&2&&(c(20),u("ngForOf",t.horarios),c(7),C("ngModel",t.newHorario.fecha),u("min",t.today),c(3),C("ngModel",t.newHorario.horaSesion),c(3),C("ngModel",t.newHorario.linkSesionPublica),c(3),u("ngIf",t.editableHorario))},dependencies:[H,j,O,te,$,J,K,Q,ee,Y,X],styles:[".horario-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333}h3[_ngcontent-%COMP%]{margin-bottom:15px;color:#333}.horarios-list[_ngcontent-%COMP%]{margin-bottom:30px}.horarios-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.horarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .horarios-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #ddd}.horarios-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.horarios-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.horarios-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.horarios-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{padding:8px 16px;margin-right:8px;cursor:pointer;border:none;border-radius:4px;transition:background-color .3s}.edit-button[_ngcontent-%COMP%]{background-color:orange;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.submit-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;width:100%;padding:12px;font-size:16px;border-radius:4px}.new-horario-form[_ngcontent-%COMP%]{margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], input[type=url][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px}input[type=date][_ngcontent-%COMP%]:focus, input[type=time][_ngcontent-%COMP%]:focus, input[type=url][_ngcontent-%COMP%]:focus{border-color:#4caf50}button[_ngcontent-%COMP%]:hover{opacity:.8}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};var We=[{path:"",redirectTo:"perfil",pathMatch:"full"},{path:"",component:N,children:[{path:"",redirectTo:"perfil",pathMatch:"full"},{path:"perfil",component:re},{path:"horarios",component:F},{path:"resenas",component:D}]}];export{We as mentorRoutes};
